## <font color="#f57332">〇、前言</font>

> 华硕RT-AX89X是华硕高端路由里唯一的一款以高通SoC为基础的机器，其搭载了性能强劲、工艺先进的高通IPQ8074 SoC，官方名全称为：IPQ8074 Wi-Fi Access Point SoC，是集CPU、Wi-Fi、网络交换、电源管理芯片为一体的SoC，SoC中的的CPU为四核 ARM Cortex A53，14 nm FinFET工艺，主频2.2GHz。RT-AX89X同时搭载了QCN5024 2.4G无线芯片，可提供4个802.11ax空间流，在AX模式下最高速率为1150Mbps，双QCN5054 5G无线芯片，一起可以可以实现80MHz频宽下8个空间流，或者160MHz频宽下4个空间流，在AX协议下，最高速率为4804Mbps。
>
> 如此高规格且性能强劲的路由器，现在终于迎来了其首个第三方固件：`koolshare官改固件`！koolshare固件的最大特点：软件中心，也可以在高通机型RT-AX89X上使用了！当然，一如既往的，koolshare官改固件和软件中心是免费提供的。
>
> 下面是我对RT-AX89X进行固件开发的时候，整理的一些信息：
>
> 1. RT-AX89X固件平台为qca-ipq806x，其采用的是uclibc作为c库，所以这次固件体积会比华硕hnd/axhnd/axhnd,675x机型的固件小很多，运行程序时对内存占用也会少一些。
> 2. 虽然IPQ8074为四核ARM Cortex A53，是armv8架构，但是RT-AX89X的固件内核是32位的，所以其固件内显示armv7l。
> 3. RT-AX89X的jffs分区大小为125.3M，仍然挂载在/jffs目录，但是分区格式不是jffs2，而是ubifs，这应该是华硕第一款jffs分区采用ubifs格式。
> 4. 因为采用的高通平台，所以固件里既没有博通的vlanctl，也没有以前的robocfg工具来实现简易的VLAN配置，所以软件中心中心中【上海IPTV】暂时没法移植过来
> 5. RT-AX89X的WiFi区域只有3个：亚洲、澳大利亚、默认值，测试得知发现澳大利亚和亚洲均为30dbm的发射功率，不过亚洲地区是全信道，澳大利亚的信达和默认值一样。亚洲地区5G选149信道功率为30dbm，选36信道则为23dbm，澳大利亚地区不管是36信道还是149信道，都能达到30dbm的功率。RT-AX89X有如此功率，所以【wifi boost】插件也就不需要了。
>
> RT-AX89X在华硕的高端路由器产品线里算得上是一个非常特殊的存在，因为其使用了高通平台，且目前是官改固件中唯一的高通平台机器，这就意味着不像博通平台那样有众多机型的支持。做一个插件出来就可以通用很多机型，覆盖很多用户。RT-AX89X官改固件目前软件中心和所有的插件维护都是我自己，所以以后插件的维护会比较缓慢，希望大家能理解。


## <font color="#f57332">一、刷机须知</font>

<font color="#DC143C">注意1：请刷机的朋友认真阅读本帖！！！刷机带来的风险请自行承担！！！</font>
<font color="#DC143C">注意2：欢迎转载本帖，但是请一定尊重开发组的成果，注明本帖来源！！！</font>

---

## <font color="#f57332">二、固件主要特色</font>

> 官改固件的开发初衷是在尽量保持ASUS官方固件原汁原味的基础上，增加软件中心及对应插件的支持。
>
> 所以：**官改固件 = 官方固件 + 为了软件中心进行必要的最小化改动 + 软件中心**

1. 使用官方固件源代码为基础修改，官方固件有的功能官改固件都有，比如AiMesh等；
2. koolshare软件中心支持，RT-AX89X为qca-ipq806x平台，软件中心代号为：[qcasoft](https://github.com/koolshare/qcasoft)。


## <font color="#f57332">三、支持机型</font>

> - 本固件仅支持华硕`RT-AX89X`机型，其它机型请勿使用本固件！


##  <font color="#f57332">三、更新日志</font>

### <font color="##00BFFF">386_47027（2022年03月10日）</font>

> 此次更新中间版本跨度较大，如升级后出现问题，请尝试重置路由器后重新设置！

1. 同步ASUS最新RT-AX89X源代码：`GPL_RT_AX89X_300438647027`；
2. 更新内置软件中心为最新版本：1.27；

### <font color="##00BFFF">386_23012（2021年07月28日）</font>

1. 同步ASUS最新RT-AX89X源代码：`GPL_RT_AX89X_300438623012`；
2. 更新内置软件中心为最新版本：1.2.6；

### <font color="##00BFFF">386_22790（2020年11月30日）</font>

> 华硕RT-AX89X成为第一批大版本从384迈入386的机型，版本号为：386_22790，和RT-AX89X 386公开测试版本RC1比较接近，所以其功能上稍微弱于RC2，目前并没有speedtest网络测速。386版本最重要的特性就是华硕AiMesh升级为AiMesh 2.0，并且有一系列底层组件的更新。

1. 同步ASUS最新RT-AX89X源代码：`GPL_RT_AX89X_300438622790`；
2. 更新内置软件中心为最新版本：1.2.2；

### <font color="##00BFFF">384_82800（2020年09月29日）</font>

1. RT-AX89X第一个正式发布的官改版本，基于华硕最新GPL代码：`GPL_RT_AX89X_300438482800` 制作；
2. 关闭固件自动更新功能，以免用户更新到华硕官方固件而失去软件中心等功能；
3. 固件首页默认显示CPU、内存、以太网接口的使用状态，而不是无线网络设置和相关信息；
4. 去除华硕固件后台web使用哥特（Gothic）风格字体，因为其显示中文的时候字体严重发虚；
5. 现在使用ZenWiFi AX6600官改固件作为`AiMesh节点`时，其web后台能正常访问了！
6. 添加koolshare软件中心支持，以及插件需要的必要的内核组件和busybox组件等。
7. 移植了hnd软件中心的多数插件，插件使用方法基本不变。


## <font color="#f57332">五、刷机步骤（请仔细阅读）：</font>

- 约定`原厂固件`为RT-AX89X华硕官方固件。
- 约定`官改固件`为koolshare开发组在本帖发布的基于[华硕官方RT-AX89X源代码](https://www.asus.com.cn/Networking/RT-AX89X/HelpDesk_Download/)修改而来的带软件中心的[RT-AX89X官改固件](https://koolshare.cn/thread-188090-1-2.html)。

### <font color="##00BFFF">A. 原厂 刷 官改：</font>

1. 在原产固件的固件升级页面下直接上传.trx 后缀的RT-AX89官改固件文件；
2. 刷机完成后会自动重启，此时刷机完成（如无特殊说明，刷机完成后不需要恢复出产设置，当然恢复一次更好）；
3. 重启后先将路由器连上网络，然后进入软件中心将软件中心更新到最新版本后即可使用。

### <font color="##00BFFF">B. 官改 刷 官改：</font>

1. 在本帖下载并刷过官改固件的，在固件升级页面下直接上传.trx后缀的RT-AX89X官改固件文件即可（如无特殊说明，刷机完成后不用恢复出产设置）；
2. 刷机后所有已经安装的插件都会被保留，不会受到影响。

### <font color="##00BFFF">C. 官改 刷 原厂</font>

1. 在官改固件升级页面下直接上传.trx 后缀的原产固件文件（如无特殊说明，刷机完成后不用恢复出产设置，当然恢复一次更好）；
2. 刷机完成后固件恢复为官方固件，但是jffs分区可能仍然留有一些软件中心相关文件；
3. 如果需要彻底清空jffs分区里的软件中心文件残留，需要再执行一次恢复出厂设置（同时勾选恢复按钮旁边的选择框）；或者参见后文【<font color="#f57332">**重要命令/操作**</font>】中的【<font color="#DC143C">**清空jffs空间**</font>】或者【<font color="#DC143C">**删除软件中心**</font>】。


## <font color="#f57332">六、注意事项：</font>

1. 刷机后如果界面显示不正常，请尝试清空浏览器缓存（ctrl + F5）后重试；
2. 强烈建议使用Chrome浏览器或者Chromium内核的浏览器，以保持最佳兼容性；
3. 刷回官方固件后，单纯的恢复出厂设置并不能完全清除jffs分区的软件中心文件，需要在恢复出厂设置的时候同时勾选恢复按钮旁边的选择框。
4. 由于固件来自官改，jffs分区是默认开启的，没有格式化jffs分区的选项，如果需要重置软件中心（不影响jffs分区其它数据），请登录ssh后运行<font color="#DC143C">**软件中心重置命令**</font>（见下文：重要命令）